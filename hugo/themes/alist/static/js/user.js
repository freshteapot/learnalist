!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function l(t){return document.createTextNode(t)}function d(){return l(" ")}function p(){return l("")}function f(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function m(t){return function(e){return e.preventDefault(),t.call(this,e)}}function h(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function g(t,e){(null!=e||t.value)&&(t.value=e)}let w;function $(t){w=t}const b=[],y=[],v=[],x=[],_=Promise.resolve();let L=!1;function C(t){v.push(t)}function O(){const t=new Set;do{for(;b.length;){const t=b.shift();$(t),E(t.$$)}for(;y.length;)y.pop()();for(let e=0;e<v.length;e+=1){const n=v[e];t.has(n)||(n(),t.add(n))}v.length=0}while(b.length);for(;x.length;)x.pop()();L=!1}function E(t){t.fragment&&(t.update(t.dirty),r(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(C))}const S=new Set;let R,T;function k(){R={r:0,c:[],p:R}}function I(){R.r||r(R.c),R=R.p}function M(t,e){t&&t.i&&(S.delete(t),t.i(e))}function A(t,e,n,r){if(t&&t.o){if(S.has(t))return;S.add(t),R.c.push(()=>{S.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}function D(t,n,i){const{fragment:s,on_mount:a,on_destroy:u,after_update:c}=t.$$;s.m(n,i),C(()=>{const n=a.map(e).filter(o);u?u.push(...n):r(n),t.$$.on_mount=[]}),c.forEach(C)}function H(t,e){t.$$.fragment&&(r(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function N(t,e){t.$$.dirty||(b.push(t),L||(L=!0,_.then(O)),t.$$.dirty=n()),t.$$.dirty[e]=!0}function U(e,o,i,s,a,u){const c=w;$(e);const l=o.props||{},d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:n(),dirty:null};let p=!1;var f;d.ctx=i?i(e,l,(t,n)=>{d.ctx&&a(d.ctx[t],d.ctx[t]=n)&&(d.bound[t]&&d.bound[t](n),p&&N(e,t))}):l,d.update(),p=!0,r(d.before_update),d.fragment=s(d.ctx),o.target&&(o.hydrate?d.fragment.l((f=o.target,Array.from(f.childNodes))):d.fragment.c(),o.intro&&M(e.$$.fragment),D(e,o.target,o.anchor),O()),$(c)}function B(e){var n;return{c(){(n=c("p")).innerHTML='\n\t\t\t\tYou are already logged in.<br>\n\t\t\t\tGoto the <a href="/welcome.html">welcome page</a>',this.c=t},m(t,e){a(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}"undefined"!=typeof HTMLElement&&(T=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}$destroy(){H(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}});class P extends T{constructor(t){super(),U(this,{target:this.shadowRoot},null,B,i,[]),t&&t.target&&a(t.target,this,t.anchor)}}customElements.define("user-already-logged-in",P);var j,F=(function(t,e){var n;n=function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(e,n,i){if("undefined"!=typeof document){"number"==typeof(i=t({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var s=JSON.stringify(n);/^[\{\[]/.test(s)&&(n=s)}catch(t){}n=r.write?r.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var a="";for(var u in i)i[u]&&(a+="; "+u,!0!==i[u]&&(a+="="+i[u].split(";")[0]));return document.cookie=e+"="+n+a}}function s(t,n){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],s=0;s<i.length;s++){var a=i[s].split("="),u=a.slice(1).join("=");n||'"'!==u.charAt(0)||(u=u.slice(1,-1));try{var c=e(a[0]);if(u=(r.read||r)(u,c)||e(u),n)try{u=JSON.parse(u)}catch(t){}if(o[c]=u,t===c)break}catch(t){}}return t?o[t]:o}}return o.set=i,o.get=function(t){return s(t,!1)},o.getJSON=function(t){return s(t,!0)},o.remove=function(e,n){i(e,"",t(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}(function(){})},t.exports=n()}(j={exports:{}},j.exports),j.exports);const J="loggedin";function q(){return!!F.get(J)}function G(e){var n,r=new P({});return{c(){r.$$.fragment.c()},m(t,e){D(r,t,e),n=!0},p:t,i(t){n||(M(r.$$.fragment,t),n=!0)},o(t){A(r.$$.fragment,t),n=!1},d(t){H(r,t)}}}function Y(e){var n,o,i,p,w,$,b,y,v,x,_,L,C,O,E,S,R;return{c(){(n=c("p")).textContent="Login with",o=d(),i=c("form"),(p=c("label")).textContent="Email",w=d(),$=c("input"),b=d(),(y=c("label")).textContent="Password",v=d(),x=c("input"),_=d(),L=c("button"),C=l("Login"),E=d(),(S=c("p")).innerHTML='\n\t\t\t\t\tor <a href="/register.html">register</a>',h($,"type","text"),h(x,"type","password"),L.disabled=O=!e.email||!e.password,h(L,"type","submit"),R=[f($,"input",e.input0_input_handler),f(x,"input",e.input1_input_handler),f(i,"submit",m(e.handleSubmit))]},m(t,r){a(t,n,r),a(t,o,r),a(t,i,r),s(i,p),s(i,w),s(i,$),g($,e.email),s(i,b),s(i,y),s(i,v),s(i,x),g(x,e.password),s(i,_),s(i,L),s(L,C),s(i,E),s(i,S)},p(t,e){t.email&&$.value!==e.email&&g($,e.email),t.password&&x.value!==e.password&&g(x,e.password),(t.email||t.password)&&O!==(O=!e.email||!e.password)&&(L.disabled=O)},i:t,o:t,d(t){t&&(u(n),u(o),u(i)),r(R)}}}function Z(e){var n,r,o,i,s=[Y,G],c=[];function l(t,e){return e.isLoggedIn?1:0}return n=l(0,e),r=c[n]=s[n](e),{c(){r.c(),o=p(),this.c=t},m(t,e){c[n].m(t,e),a(t,o,e),i=!0},p(t,e){var i=n;(n=l(0,e))===i?c[n].p(t,e):(k(),A(c[i],1,1,()=>{c[i]=null}),I(),(r=c[n])||(r=c[n]=s[n](e)).c(),M(r,1),r.m(o.parentNode,o))},i(t){i||(M(r),i=!0)},o(t){A(r),i=!1},d(t){c[n].d(t),t&&u(o)}}}function z(t,e,n){let{redirectOnLogin:r="/welcome.html"}=e,o="",i="";let s=q();return t.$set=(t=>{"redirectOnLogin"in t&&n("redirectOnLogin",r=t.redirectOnLogin)}),{redirectOnLogin:r,email:o,password:i,handleSubmit:function(){var t,e;console.log("Try logging them in"),console.log("email is "+o),console.log("password is "+i),console.log("// TODO: Get the token from the server"),t="abc123",e=r,F.set(J,t),e||(e="/welcome.html"),window.location=e},isLoggedIn:s,input0_input_handler:function(){o=this.value,n("email",o)},input1_input_handler:function(){i=this.value,n("password",i)}}}function K(e){var n,r=q()&&function(t){var e,n;return{c(){(e=c("form")).innerHTML='<button type="submit">\n\t\t\t\t\tLogout\n\t\t\t\t</button>',n=f(e,"submit",m(t.handleSubmit))},m(t,n){a(t,e,n)},d(t){t&&u(e),n()}}}(e);return{c(){r&&r.c(),n=p(),this.c=t},m(t,e){r&&r.m(t,e),a(t,n,e)},p:t,i:t,o:t,d(t){r&&r.d(t),t&&u(n)}}}function Q(t,e,n){let{redirect:r="/"}=e;return t.$set=(t=>{"redirect"in t&&n("redirect",r=t.redirect)}),{redirect:r,handleSubmit:function(){!function(t){t||(t="/"),console.log("Clear cookies"),F.remove(J),window.location=t}(r)}}}customElements.define("user-login",class extends T{constructor(t){super(),this.shadowRoot.innerHTML="<style>input{display:block;width:500px;max-width:100%}</style>",U(this,{target:this.shadowRoot},z,Z,i,["redirectOnLogin"]),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),O()))}static get observedAttributes(){return["redirectOnLogin"]}get redirectOnLogin(){return this.$$.ctx.redirectOnLogin}set redirectOnLogin(t){this.$set({redirectOnLogin:t}),O()}});function V(e){var n,o=e.showPageIf(),i=o&&function(t){var e,n,o,i,p,w,$,b,y,v,x;return{c(){(e=c("p")).textContent="Forgotten password",n=d(),o=c("form"),(i=c("label")).textContent="Email",p=d(),w=c("input"),$=d(),b=c("button"),y=l("Send password"),h(w,"type","text"),b.disabled=v=!t.email,h(b,"type","submit"),x=[f(w,"input",t.input_input_handler),f(o,"submit",m(t.handleSubmit))]},m(r,u){a(r,e,u),a(r,n,u),a(r,o,u),s(o,i),s(o,p),s(o,w),g(w,t.email),s(o,$),s(o,b),s(b,y)},p(t,e){t.email&&w.value!==e.email&&g(w,e.email),t.email&&v!==(v=!e.email)&&(b.disabled=v)},d(t){t&&(u(e),u(n),u(o)),r(x)}}}(e);return{c(){i&&i.c(),n=p(),this.c=t},m(t,e){i&&i.m(t,e),a(t,n,e)},p(t,e){o&&i.p(t,e)},i:t,o:t,d(t){i&&i.d(t),t&&u(n)}}}function W(t,e,n){let{displayif:r="/forgotten-password.html"}=e,o="";return t.$set=(t=>{"displayif"in t&&n("displayif",r=t.displayif)}),{displayif:r,email:o,handleSubmit:function(){console.log("Try sending them the password"),console.log("email is "+o)},showPageIf:function(){return window.location.pathname===r},input_input_handler:function(){o=this.value,n("email",o)}}}customElements.define("user-logout",class extends T{constructor(t){super(),U(this,{target:this.shadowRoot},Q,K,i,["redirect"]),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),O()))}static get observedAttributes(){return["redirect"]}get redirect(){return this.$$.ctx.redirect}set redirect(t){this.$set({redirect:t}),O()}});function X(e){var n,r=new P({});return{c(){r.$$.fragment.c()},m(t,e){D(r,t,e),n=!0},p:t,i(t){n||(M(r.$$.fragment,t),n=!0)},o(t){A(r.$$.fragment,t),n=!1},d(t){H(r,t)}}}function tt(e){var n,o,i,p,w,$,b,y,v,x,_,L,C,O,E;return{c(){(n=c("p")).textContent="Register with email",o=d(),i=c("form"),(p=c("label")).textContent="Email",w=d(),$=c("input"),b=d(),(y=c("label")).textContent="Password",v=d(),x=c("input"),_=d(),L=c("button"),C=l("Register"),h($,"type","text"),h(x,"type","password"),L.disabled=O=!e.email||!e.password,h(L,"type","submit"),E=[f($,"input",e.input0_input_handler),f(x,"input",e.input1_input_handler),f(i,"submit",m(e.handleSubmit))]},m(t,r){a(t,n,r),a(t,o,r),a(t,i,r),s(i,p),s(i,w),s(i,$),g($,e.email),s(i,b),s(i,y),s(i,v),s(i,x),g(x,e.password),s(i,_),s(i,L),s(L,C)},p(t,e){t.email&&$.value!==e.email&&g($,e.email),t.password&&x.value!==e.password&&g(x,e.password),(t.email||t.password)&&O!==(O=!e.email||!e.password)&&(L.disabled=O)},i:t,o:t,d(t){t&&(u(n),u(o),u(i)),r(E)}}}function et(e){var n,r,o,i,s=[tt,X],c=[];function l(t,e){return e.isLoggedIn?1:0}return n=l(0,e),r=c[n]=s[n](e),{c(){r.c(),o=p(),this.c=t},m(t,e){c[n].m(t,e),a(t,o,e),i=!0},p(t,e){var i=n;(n=l(0,e))===i?c[n].p(t,e):(k(),A(c[i],1,1,()=>{c[i]=null}),I(),(r=c[n])||(r=c[n]=s[n](e)).c(),M(r,1),r.m(o.parentNode,o))},i(t){i||(M(r),i=!0)},o(t){A(r),i=!1},d(t){c[n].d(t),t&&u(o)}}}function nt(t,e,n){let r="",o="";let i=q();return q()&&console.log("Maybe we just redirect them"),{email:r,password:o,handleSubmit:function(){console.log("How do we want to register users?"),console.log("// TODO send a request to the server to register a user"),console.log("// TODO save response and log them in.")},isLoggedIn:i,input0_input_handler:function(){r=this.value,n("email",r)},input1_input_handler:function(){o=this.value,n("password",o)}}}customElements.define("user-forgot-password",class extends T{constructor(t){super(),this.shadowRoot.innerHTML="<style>input{display:block;width:500px;max-width:100%}</style>",U(this,{target:this.shadowRoot},W,V,i,["displayif"]),t&&(t.target&&a(t.target,this,t.anchor),t.props&&(this.$set(t.props),O()))}static get observedAttributes(){return["displayif"]}get displayif(){return this.$$.ctx.displayif}set displayif(t){this.$set({displayif:t}),O()}});customElements.define("user-register",class extends T{constructor(t){super(),this.shadowRoot.innerHTML="<style>input{display:block;width:500px;max-width:100%}</style>",U(this,{target:this.shadowRoot},nt,et,i,[]),t&&t.target&&a(t.target,this,t.anchor)}})}();
//# sourceMappingURL=user.js.map
