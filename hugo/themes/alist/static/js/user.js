!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function s(t){t.forEach(e)}function r(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function o(t,e,n){t.insertBefore(e,n||null)}function l(t){t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function u(t){return document.createTextNode(t)}function d(){return u(" ")}function p(){return u("")}function m(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function f(t){return function(e){return e.preventDefault(),t.call(this,e)}}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){(null!=e||t.value)&&(t.value=e)}let g;function w(t){g=t}const v=[],y=[],k=[],$=[],x=Promise.resolve();let L=!1;function _(t){k.push(t)}function C(){const t=new Set;do{for(;v.length;){const t=v.shift();w(t),O(t.$$)}for(;y.length;)y.pop()();for(let e=0;e<k.length;e+=1){const n=k[e];t.has(n)||(n(),t.add(n))}k.length=0}while(v.length);for(;$.length;)$.pop()();L=!1}function O(t){null!==t.fragment&&(t.update(t.dirty),s(t.before_update),t.fragment&&t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(_))}const E=new Set;let S,T;function R(t,e){t&&t.i&&(E.delete(t),t.i(e))}function I(t,e,n,s){if(t&&t.o){if(E.has(t))return;E.add(t),S.c.push(()=>{E.delete(t),s&&(n&&t.d(1),s())}),t.o(e)}}function M(t,n,i){const{fragment:a,on_mount:o,on_destroy:l,after_update:c}=t.$$;a&&a.m(n,i),_(()=>{const n=o.map(e).filter(r);l?l.push(...n):s(n),t.$$.on_mount=[]}),c.forEach(_)}function H(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx={})}function A(t,e){t.$$.dirty||(v.push(t),L||(L=!0,x.then(C)),t.$$.dirty=n()),t.$$.dirty[e]=!0}function D(e,r,i,a,o,l){const c=g;w(e);const u=r.props||{},d=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:o,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:n(),dirty:null};let p=!1;var m;d.ctx=i?i(e,u,(t,n,s=n)=>(d.ctx&&o(d.ctx[t],d.ctx[t]=s)&&(d.bound[t]&&d.bound[t](s),p&&A(e,t)),n)):u,d.update(),p=!0,s(d.before_update),d.fragment=!!a&&a(d.ctx),r.target&&(r.hydrate?d.fragment&&d.fragment.l((m=r.target,Array.from(m.childNodes))):d.fragment&&d.fragment.c(),r.intro&&R(e.$$.fragment),M(e,r.target,r.anchor),C()),w(c)}function N(e){let n;return{c(){(n=c("div")).innerHTML='<nav class="pa3 pa1-ns"><a class="link dim black b f6 f5-ns dib mr3" href="/" title="Home">Learnalist</a></nav> \n\t<nav class="db dtc-ns v-mid w-100 tl tr-ns mt2 mt0-ns"><a title="Login or logout" href="/login.html" class="f6 fw6 hover-black link black-70 mr2 mr3-m mr4-l dib-l">\n\t\t\tLogin\n\t\t</a></nav>',this.c=t,h(n,"class","db dt-ns mw9 center w-100")},m(t,e){o(t,n,e)},p:t,i:t,o:t,d(t){t&&l(n)}}}"function"==typeof HTMLElement&&(T=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}$destroy(){H(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}});class U extends T{constructor(t){super(),D(this,{target:this.shadowRoot},null,N,i,{}),t&&t.target&&o(t.target,this,t.anchor)}}customElements.define("user-already-logged-in",U);var B,P=(function(t,e){var n;n=function(){function t(){for(var t=0,e={};t<arguments.length;t++){var n=arguments[t];for(var s in n)e[s]=n[s]}return e}function e(t){return t.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(s){function r(){}function i(e,n,i){if("undefined"!=typeof document){"number"==typeof(i=t({path:"/"},r.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(t){}n=s.write?s.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var o="";for(var l in i)i[l]&&(o+="; "+l,!0!==i[l]&&(o+="="+i[l].split(";")[0]));return document.cookie=e+"="+n+o}}function a(t,n){if("undefined"!=typeof document){for(var r={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var o=i[a].split("="),l=o.slice(1).join("=");n||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var c=e(o[0]);if(l=(s.read||s)(l,c)||e(l),n)try{l=JSON.parse(l)}catch(t){}if(r[c]=l,t===c)break}catch(t){}}return t?r[t]:r}}return r.set=i,r.get=function(t){return a(t,!1)},r.getJSON=function(t){return a(t,!0)},r.remove=function(e,n){i(e,"",t(n,{expires:-1}))},r.defaults={},r.withConverter=n,r}(function(){})},t.exports=n()}(B={exports:{}},B.exports),B.exports);const j="loggedin";function F(){return!!P.get(j)}function G(e){let n;return{c(){(n=c("p")).innerHTML='\nYou are already logged in.<br>\nGoto the <a href="/welcome.html">welcome page</a>',h(n,"class","measure center")},m(t,e){o(t,n,e)},p:t,d(t){t&&l(n)}}}function J(t){let e,n,r,i,u,p,g,w,v,y,k,$,x,L,_,C,O,E,S,T,R,I,M,H,A,D,N,U,B,P;return{c(){e=c("form"),n=c("fieldset"),r=c("div"),(i=c("label")).textContent="Email",u=d(),p=c("input"),g=d(),w=c("div"),(v=c("label")).textContent="Password",y=d(),k=c("input"),$=d(),x=c("div"),L=c("input"),C=d(),O=c("input"),S=d(),T=c("input"),I=d(),M=c("input"),A=d(),D=c("input"),U=d(),(B=c("div")).innerHTML='<a href="/forgot-your-password.html" class="f6 link dim black db">Forgot your password?</a> \n\t\t\t<a href="/register.html" class="f6 link dim black db">Sign up</a> \n\t\t\t<a href="/api/v1/oauth/google/redirect" class="f6 link dim black db">Login with google</a>',h(i,"class","db fw6 lh-copy f6"),h(i,"for","email-address"),h(p,"class","pa2 input-reset ba bg-transparent b--black-20 w-100 br2"),h(p,"type","email"),h(p,"name","email-address"),h(p,"id","email-address"),h(r,"class","mt3"),h(v,"class","db fw6 lh-copy f6"),h(v,"for","password"),h(k,"class","b pa2 input-reset ba bg-transparent b--black-20 w-100 br2"),h(k,"type","password"),h(k,"name","password"),h(k,"id","password"),h(w,"class","mv3"),h(n,"id","sign_up"),h(n,"class","ba b--transparent ph0 mh0"),h(L,"class","b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib br2"),L.disabled=_=!t.email||!t.password,h(L,"type","submit"),L.value="L",h(O,"class","b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib br2"),O.disabled=E=!t.email||!t.password,h(O,"type","submit"),O.value="O",h(T,"class","b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib br2"),T.disabled=R=!t.email||!t.password,h(T,"type","submit"),T.value="G",h(M,"class","b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib br2"),M.disabled=H=!t.email||!t.password,h(M,"type","submit"),M.value="I",h(D,"class","b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib br2"),D.disabled=N=!t.email||!t.password,h(D,"type","submit"),D.value="N",h(x,"class",""),h(B,"class","lh-copy mt3"),h(e,"class","measure center"),P=[m(p,"input",t.input0_input_handler),m(k,"input",t.input1_input_handler),m(e,"submit",f(t.handleSubmit))]},m(s,l){o(s,e,l),a(e,n),a(n,r),a(r,i),a(r,u),a(r,p),b(p,t.email),a(n,g),a(n,w),a(w,v),a(w,y),a(w,k),b(k,t.password),a(e,$),a(e,x),a(x,L),a(x,C),a(x,O),a(x,S),a(x,T),a(x,I),a(x,M),a(x,A),a(x,D),a(e,U),a(e,B)},p(t,e){t.email&&p.value!==e.email&&b(p,e.email),t.password&&k.value!==e.password&&b(k,e.password),(t.email||t.password)&&_!==(_=!e.email||!e.password)&&(L.disabled=_),(t.email||t.password)&&E!==(E=!e.email||!e.password)&&(O.disabled=E),(t.email||t.password)&&R!==(R=!e.email||!e.password)&&(T.disabled=R),(t.email||t.password)&&H!==(H=!e.email||!e.password)&&(M.disabled=H),(t.email||t.password)&&N!==(N=!e.email||!e.password)&&(D.disabled=N)},d(t){t&&l(e),s(P)}}}function q(e){let n;let s=function(t,e){return e.isLoggedIn?G:J}(0,e)(e);return{c(){n=c("main"),s.c(),this.c=t,h(n,"class","pa4 black-80")},m(t,e){o(t,n,e),s.m(n,null)},p(t,e){s.p(t,e)},i:t,o:t,d(t){t&&l(n),s.d()}}}function Y(t,e,n){let{redirectOnLogin:s="/welcome.html"}=e,r="",i="";let a=F();return t.$set=(t=>{"redirectOnLogin"in t&&n("redirectOnLogin",s=t.redirectOnLogin)}),{redirectOnLogin:s,email:r,password:i,handleSubmit:function(){var t,e;console.log("Try logging them in"),console.log("email is "+r),console.log("password is "+i),console.log("// TODO: Get the token from the server"),t="abc123",e=s,P.set(j,t),e||(e="/welcome.html"),window.location=e},isLoggedIn:a,input0_input_handler:function(){r=this.value,n("email",r)},input1_input_handler:function(){i=this.value,n("password",i)}}}function Z(e){let n,r=e.showPageIf(),i=r&&function(t){let e,n,r,i,p,g,w,v,y,k,$;return{c(){(e=c("p")).textContent="Forgotten password",n=d(),r=c("form"),(i=c("label")).textContent="Email",p=d(),g=c("input"),w=d(),v=c("button"),y=u("Send password"),h(g,"type","text"),v.disabled=k=!t.email,h(v,"type","submit"),$=[m(g,"input",t.input_input_handler),m(r,"submit",f(t.handleSubmit))]},m(s,l){o(s,e,l),o(s,n,l),o(s,r,l),a(r,i),a(r,p),a(r,g),b(g,t.email),a(r,w),a(r,v),a(v,y)},p(t,e){t.email&&g.value!==e.email&&b(g,e.email),t.email&&k!==(k=!e.email)&&(v.disabled=k)},d(t){t&&l(e),t&&l(n),t&&l(r),s($)}}}(e);return{c(){i&&i.c(),n=p(),this.c=t},m(t,e){i&&i.m(t,e),o(t,n,e)},p(t,e){r&&i.p(t,e)},i:t,o:t,d(t){i&&i.d(t),t&&l(n)}}}function z(t,e,n){let{displayif:s="/forgotten-password.html"}=e,r="";return t.$set=(t=>{"displayif"in t&&n("displayif",s=t.displayif)}),{displayif:s,email:r,handleSubmit:function(){console.log("Try sending them the password"),console.log("email is "+r)},showPageIf:function(){return window.location.pathname===s},input_input_handler:function(){r=this.value,n("email",r)}}}customElements.define("user-login",class extends T{constructor(t){super(),this.shadowRoot.innerHTML="<style>@import url('/css/tachyons.min.css');</style>",D(this,{target:this.shadowRoot},Y,q,i,{redirectOnLogin:0}),t&&(t.target&&o(t.target,this,t.anchor),t.props&&(this.$set(t.props),C()))}static get observedAttributes(){return["redirectOnLogin"]}get redirectOnLogin(){return this.$$.ctx.redirectOnLogin}set redirectOnLogin(t){this.$set({redirectOnLogin:t}),C()}});function K(e){let n;const s=new U({});return{c(){var t;(t=s.$$.fragment)&&t.c()},m(t,e){M(s,t,e),n=!0},p:t,i(t){n||(R(s.$$.fragment,t),n=!0)},o(t){I(s.$$.fragment,t),n=!1},d(t){H(s,t)}}}function Q(e){let n,r,i,u,p,g,w,v,y,k,$,x,L,_,C,O,E,S,T,R,I,M,H,A;return{c(){n=c("div"),r=c("form"),i=c("fieldset"),(u=c("legend")).textContent="Register and start making lists",p=d(),g=c("div"),(w=c("label")).textContent="Email",v=d(),y=c("input"),k=d(),$=c("div"),(x=c("label")).textContent="Password",L=d(),_=c("input"),C=d(),O=c("div"),(E=c("label")).innerHTML='Name <span class="normal black-60">(optional)</span>',S=d(),T=c("input"),R=d(),I=c("div"),M=c("input"),h(u,"class","pa0 f5 f4-ns mb3 black-80"),h(w,"class","db fw6 lh-copy f6"),h(w,"for","email-address"),h(y,"class","pa2 input-reset ba bg-white b--black-20 w-100 br2"),h(y,"type","email"),h(y,"name","email-address"),h(y,"id","email"),h(g,"class","mt3"),h(x,"class","db fw6 lh-copy f6"),h(x,"for","password"),h(_,"class","b pa2 input-reset ba bg-white b--black-20 w-100 br2"),h(_,"type","password"),h(_,"name","password"),h(_,"id","password"),h($,"class","mv3"),h(E,"class","db fw6 lh-copy f6"),h(E,"for","usersname"),h(T,"class","b pa2 input-reset ba bg-white b--black-20 w-100 br2"),h(T,"type","text"),h(T,"name","usersname"),h(T,"id","usersname"),h(O,"class","mv3"),h(i,"class","cf bn ma0 pa0"),h(M,"class","b pa2 input-reset ba bg-white b--black-20 w-100 br2"),M.disabled=H=!e.email||!e.password,h(M,"type","submit"),M.value="Lets go!",h(I,"class","mv3"),h(r,"class","bg-yellow mw7 center pa4 br2-ns ba b--black-10"),h(n,"class","pa4-l"),A=[m(y,"input",e.input0_input_handler),m(_,"input",e.input1_input_handler),m(T,"input",e.input2_input_handler),m(r,"submit",f(e.handleSubmit))]},m(t,s){o(t,n,s),a(n,r),a(r,i),a(i,u),a(i,p),a(i,g),a(g,w),a(g,v),a(g,y),b(y,e.email),a(i,k),a(i,$),a($,x),a($,L),a($,_),b(_,e.password),a(i,C),a(i,O),a(O,E),a(O,S),a(O,T),b(T,e.usersname),a(r,R),a(r,I),a(I,M)},p(t,e){t.email&&y.value!==e.email&&b(y,e.email),t.password&&_.value!==e.password&&b(_,e.password),t.usersname&&T.value!==e.usersname&&b(T,e.usersname),(t.email||t.password)&&H!==(H=!e.email||!e.password)&&(M.disabled=H)},i:t,o:t,d(t){t&&l(n),s(A)}}}function V(e){let n,s,r,i;const a=[Q,K],c=[];return n=function(t,e){return e.isLoggedIn?1:0}(0,e),s=c[n]=a[n](e),{c(){s.c(),r=p(),this.c=t},m(t,e){c[n].m(t,e),o(t,r,e),i=!0},p(t,e){s.p(t,e)},i(t){i||(R(s),i=!0)},o(t){I(s),i=!1},d(t){c[n].d(t),t&&l(r)}}}function W(t,e,n){let s="",r="",i="";let a=F();return F()&&console.log("Maybe we just redirect them"),{email:s,password:r,usersname:i,handleSubmit:function(){console.log("How do we want to register users?"),console.log("// TODO send a request to the server to register a user"),console.log("// TODO save response and log them in."),console.log("Users name is "+i)},isLoggedIn:a,input0_input_handler:function(){s=this.value,n("email",s)},input1_input_handler:function(){r=this.value,n("password",r)},input2_input_handler:function(){i=this.value,n("usersname",i)}}}customElements.define("user-forgot-password",class extends T{constructor(t){super(),this.shadowRoot.innerHTML="<style>input{display:block;width:500px;max-width:100%}</style>",D(this,{target:this.shadowRoot},z,Z,i,{displayif:0}),t&&(t.target&&o(t.target,this,t.anchor),t.props&&(this.$set(t.props),C()))}static get observedAttributes(){return["displayif"]}get displayif(){return this.$$.ctx.displayif}set displayif(t){this.$set({displayif:t}),C()}});function X(e){let n;return{c(){(n=c("a")).textContent="Login",h(n,"title","Login or logout"),h(n,"href","/login.html"),h(n,"class","f6 fw6 hover-black link black-70 mr2 mr3-m mr4-l dib-l")},m(t,e){o(t,n,e)},p:t,d(t){t&&l(n)}}}function tt(e){let n,s;return{c(){(n=c("a")).textContent="Logout",h(n,"title","Login or logout"),h(n,"href","/login.html"),h(n,"class","f6 fw6 hover-black link black-70 mr2 mr3-m mr4-l dib-l"),s=m(n,"click",e.handleSubmit,{once:!0})},m(t,e){o(t,n,e)},p:t,d(t){t&&l(n),s()}}}function et(e){let n;let s=function(t,e){return e.isLoggedIn?tt:X}(0,e)(e);return{c(){s.c(),n=p(),this.c=t},m(t,e){s.m(t,e),o(t,n,e)},p(t,e){s.p(t,e)},i:t,o:t,d(t){s.d(t),t&&l(n)}}}function nt(t,e,n){let{redirect:s="/"}=e;let r=F();return t.$set=(t=>{"redirect"in t&&n("redirect",s=t.redirect)}),{redirect:s,handleSubmit:function(){!function(t){t||(t="/"),console.log("Clear cookies"),P.remove(j),window.location=t}(s)},isLoggedIn:r}}customElements.define("user-register",class extends T{constructor(t){super(),this.shadowRoot.innerHTML="<style>@import url('/css/tachyons.min.css');</style>",D(this,{target:this.shadowRoot},W,V,i,{}),t&&t.target&&o(t.target,this,t.anchor)}});function st(t){let e;return{c(){(e=c("a")).textContent="Login",h(e,"title","Login or logout"),h(e,"href","/login.html"),h(e,"class","f6 fw6 hover-black link black-70 mr2 mr3-m mr4-l dib-l")},m(t,n){o(t,e,n)},d(t){t&&l(e)}}}function rt(t){let e,n,s,r,i;return{c(){(e=c("a")).textContent="Create",n=d(),(s=c("a")).textContent="My Lists",r=d(),i=c("user-logout"),h(e,"title","Create your own list"),h(e,"href","/create-your-own-list.html"),h(e,"class","f6 fw6 hover-black link black-70 mr2 mr3-m mr4-l dib-l"),h(s,"title","My lists"),h(s,"href","/alists/overview.html"),h(s,"class","f6 fw6 hover-black link black-70 mr2 mr3-m mr4-l dib-l")},m(t,a){o(t,e,a),o(t,n,a),o(t,s,a),o(t,r,a),o(t,i,a)},d(t){t&&l(e),t&&l(n),t&&l(s),t&&l(r),t&&l(i)}}}function it(e){let n,s,r,i;let u=function(t,e){return e.isLoggedIn?rt:st}(0,e)(e);return{c(){n=c("div"),(s=c("nav")).innerHTML='<a class="link dim black b f6 f5-ns dib mr3" href="/" title="Home">Learnalist</a>',r=d(),i=c("nav"),u.c(),this.c=t,h(s,"class","pa3 pa1-ns"),h(i,"class","db dtc-ns v-mid w-100 tl tr-ns mt2 mt0-ns"),h(n,"class","db dt-ns mw9 center w-100")},m(t,e){o(t,n,e),a(n,s),a(n,r),a(n,i),u.m(i,null)},p:t,i:t,o:t,d(t){t&&l(n),u.d()}}}function at(t){return{isLoggedIn:F()}}customElements.define("user-logout",class extends T{constructor(t){super(),this.shadowRoot.innerHTML="<style>@import url('/css/tachyons.min.css');</style>",D(this,{target:this.shadowRoot},nt,et,i,{redirect:0}),t&&(t.target&&o(t.target,this,t.anchor),t.props&&(this.$set(t.props),C()))}static get observedAttributes(){return["redirect"]}get redirect(){return this.$$.ctx.redirect}set redirect(t){this.$set({redirect:t}),C()}});customElements.define("user-menu",class extends T{constructor(t){super(),this.shadowRoot.innerHTML="<style>@import url('/css/tachyons.min.css');</style>",D(this,{target:this.shadowRoot},at,it,i,{}),t&&t.target&&o(t.target,this,t.anchor)}})}();
//# sourceMappingURL=user.js.map
